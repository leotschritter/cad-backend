# Application Configuration
quarkus.application.name=travel-warnings-service
quarkus.http.port=8080

# Database Configuration (PostgreSQL)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=postgres
quarkus.datasource.password=postgres
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/travel_warnings_db
quarkus.datasource.jdbc.max-size=16

# Hibernate Configuration
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

# External API Configuration
# The real Auswärtiges Amt API is protected by Enodia bot protection (CAPTCHA)
# which blocks automated requests. Use mock mode for development.
app.mock-external-api=true

# REST Client Configuration - Ausw?rtiges Amt API
quarkus.rest-client."de.htwg.travelwarnings.client.AuswaertigesAmtClient".url=https://www.auswaertiges-amt.de/opendata
quarkus.rest-client."de.htwg.travelwarnings.client.AuswaertigesAmtClient".scope=jakarta.inject.Singleton
quarkus.rest-client.connect-timeout=10000
quarkus.rest-client.read-timeout=30000
# Enable automatic redirect following
quarkus.rest-client."de.htwg.travelwarnings.client.AuswaertigesAmtClient".follow-redirects=true

# Enable REST client logging for debugging
quarkus.rest-client.logging.scope=request-response
quarkus.rest-client.logging.body-limit=1000
quarkus.log.category."org.jboss.resteasy.reactive.client.logging".level=DEBUG

quarkus.log.category."de.htwg.travelwarnings".level=DEBUG

# Scheduler Configuration
quarkus.scheduler.enabled=true
# Poll travel warnings every 15 minutes
travel-warnings.poll.cron=0 */15 * * * ?

# Mailer Configuration (SendGrid-like)
quarkus.mailer.from=${SMTP_FROM:noreply@htwg-konstanz.de}
quarkus.mailer.host=${SMTP_HOST:smtp.example.com}
quarkus.mailer.port=${SMTP_PORT:587}
quarkus.mailer.username=${SMTP_USER:username}
quarkus.mailer.password=${SMTP_PASSWORD:password}
quarkus.mailer.start-tls=${SMTP_START_TLS:REQUIRED}
quarkus.mailer.auth-methods=DIGEST-MD5 CRAM-SHA256 CRAM-SHA1 CRAM-MD5 PLAIN LOGIN

# Cache Configuration
quarkus.cache.caffeine."travel-warnings".maximum-size=1000
quarkus.cache.caffeine."travel-warnings".expire-after-write=PT15M

# OpenAPI Configuration
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# Logging
quarkus.log.level=INFO
quarkus.log.category."de.htwg".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n

# CORS Configuration (for development)
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=http://localhost:3000,http://localhost:8080
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H

# Health Check
# Health endpoints are automatically enabled with the smallrye-health extension

# Dev Services (for local development)
%dev.quarkus.datasource.devservices.enabled=true
%dev.quarkus.datasource.devservices.image-name=postgres:15-alpine

# Test Configuration
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test
%test.quarkus.hibernate-orm.database.generation=drop-and-create

