@startuml BoundedContexts
!pragma layout smetana

title Bounded Contexts\nTravel SaaS Platform
caption Last updated: 2025-11-10

' ----------------------------------------------------------
' Existing bounded contexts
' ----------------------------------------------------------

/'package "Identity & Access\nContext" as IdentityContext #LightBlue {
  rectangle "User" #White
  rectangle "Authentication" #White
  rectangle "Authorization" #White

  note bottom
    **Core Responsibilities:**
    • User registration & profile
    • Authentication & tokens
    • Role & permission management
    • Tenant configuration
  end note
}'/

package "Itinerary Management\nContext" as ItineraryContext #LightGreen {
  rectangle "Itinerary" #White
  rectangle "Location" #White
  rectangle "Trip Planning" #White

  note bottom
    **Core Responsibilities:**
    • Create & manage itineraries
    • Manage locations & visits
    • Trip scheduling & planning
    • Visibility settings
  end note
}

package "Social Interaction\nContext" as SocialContext #LightCoral {
  rectangle "Like" #White
  rectangle "Comment" #White
  rectangle "Engagement" #White

  note bottom
    **Core Responsibilities:**
    • Like/unlike itineraries
    • Comment on itineraries
    • Track user engagement
  end note
}

package "Personalized Feed\nContext" as FeedContext #LightYellow {
  rectangle "Feed Generation" #White
  rectangle "Recommendation\nEngine" #White
  rectangle "Ranking" #White

  note bottom
    **Core Responsibilities:**
    • Generate personalized feed
    • Analyze user preferences
    • Rank & score content
    • Handle recommendation signals
  end note
}

' ----------------------------------------------------------
' NEW Bounded Context: Travel Warnings
' ----------------------------------------------------------

package "Travel Warnings\nContext" as WarningContext #LightSkyBlue {
  rectangle "Warning Fetcher" #White
  rectangle "Warning Matcher" #White
  rectangle "Alert Dispatcher" #White

  note bottom
    **Core Responsibilities:**
    • Fetch official travel warnings
    • Match warnings with destinations
    • Trigger email notifications
    • Manage alert subscriptions
  end note
}

' ----------------------------------------------------------
' NEW Bounded Context: Weaher Informations
' ----------------------------------------------------------

package "Weaher Informations\nContext" as WeatherContext #LightPink {
  rectangle "Weather Monitor" #White
  rectangle "Severe Weather\nDetector" #White
  rectangle "Weather Alert\nDispatcher" #White

  note bottom
    **Core Responsibilities:**
    • Monitor weather data
    • Detect severe weather events
    • Match alerts with trip dates/locations
    • Send weather notifications
  end note
}

' ----------------------------------------------------------
' Relationships
' ----------------------------------------------------------

' Social context interacts with Itinerary
SocialContext -up-> ItineraryContext : <<Customer>>\nReferences Itinerary ID

' Feed context consumes data from Social and Itinerary
FeedContext -up-> SocialContext : <<Customer>>\nConsumes Likes & Comments
FeedContext -up-> ItineraryContext : <<Customer>>\nConsumes Itinerary & Location Data

' Warning contexts depend on Itinerary for matching
ItineraryContext -right-> WarningContext : <<Supplier>>\nProvides Destinations
ItineraryContext -down-> WeatherContext : <<Supplier>>\nProvides Trip Dates & Locations

' Contexts publish events
SocialContext ..> FeedContext : <<Published Events>>\nItineraryLiked, CommentAdded
ItineraryContext ..> FeedContext : <<Published Events>>\nItineraryCreated, LocationAdded

note right of FeedContext
  **Event Subscriptions:**
  • ItineraryCreated
  • ItineraryLiked
  • CommentAdded
  • LocationVisited
end note


note right of WarningContext
  **Responsibilities:**
  • Polls Auswärtiges Amt API
  • Matches warnings with destinations
  • Sends email alerts
end note

note right of WeatherContext
  **Responsibilities:**
  • Polls Weather API
  • Detects severe weather
  • Matches with trip dates/locations
  • Sends weather alerts
end note

' ----------------------------------------------------------
' Legend
' ----------------------------------------------------------

legend right
  |= Pattern |= Description |
  | <<Customer/Supplier>> | Direct reference by ID |
  | <<Published Events>> | Async event-driven |

  |= Color |= Context |
  | <#LightGreen> | Itinerary Management |
  | <#LightCoral> | Social Interaction |
  | <#LightYellow> | Personalized Feed |
  | <#LightSkyBlue> | Travel Warnings |
  | <#LightPink> | Weaher Informations |
endlegend

note as ContextNote
  **Context Integration Strategy:**

  • Each bounded context = independent microservice
  • Contexts communicate via REST APIs and events
  • No shared databases between contexts
  • User authentication handled by external Identity Provider
end note

@enduml
